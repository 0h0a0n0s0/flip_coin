{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport ChartView from '../../view/Chart.js';\nimport ChordPiece from './ChordPiece.js';\nimport { ChordEdge } from './ChordEdge.js';\nimport { parsePercent } from '../../util/number.js';\nimport { getECData } from '../../util/innerStore.js';\nvar RADIAN = Math.PI / 180;\nvar ChordView = /** @class */function (_super) {\n  __extends(ChordView, _super);\n  function ChordView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ChordView.type;\n    return _this;\n  }\n  ChordView.prototype.init = function (ecModel, api) {};\n  ChordView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    data.diff(oldData).add(function (newIdx) {\n      /* Consider the case when there are only two nodes A and B,\n       * and there is a link between A and B.\n       * At first, they are both disselected from legend. And then\n       * when A is selected, A will go into `add` method. But since\n       * there are no edges to be displayed, A should not be added.\n       * So we should only add A when layout is defined.\n       */\n      var layout = data.getItemLayout(newIdx);\n      if (layout) {\n        var el = new ChordPiece(data, newIdx, startAngle);\n        getECData(el).dataIndex = newIdx;\n        group.add(el);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      var layout = data.getItemLayout(newIdx);\n      /* Consider the case when there are only two nodes A and B,\n       * and there is a link between A and B.\n       * and when A is disselected from legend, there should be\n       * nothing to display. But in the `data.diff` method, B will go\n       * into `update` method and having no layout.\n       * In this case, we need to remove B.\n       */\n      if (!layout) {\n        el && graphic.removeElementWithFadeOut(el, seriesModel, oldIdx);\n        return;\n      }\n      if (!el) {\n        el = new ChordPiece(data, newIdx, startAngle);\n      } else {\n        el.updateData(data, newIdx, startAngle);\n      }\n      group.add(el);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && graphic.removeElementWithFadeOut(el, seriesModel, oldIdx);\n    }).execute();\n    if (!oldData) {\n      var center = seriesModel.get('center');\n      this.group.scaleX = 0.01;\n      this.group.scaleY = 0.01;\n      this.group.originX = parsePercent(center[0], api.getWidth());\n      this.group.originY = parsePercent(center[1], api.getHeight());\n      graphic.initProps(this.group, {\n        scaleX: 1,\n        scaleY: 1\n      }, seriesModel);\n    }\n    this._data = data;\n    this.renderEdges(seriesModel, startAngle);\n  };\n  ChordView.prototype.renderEdges = function (seriesModel, startAngle) {\n    var nodeData = seriesModel.getData();\n    var edgeData = seriesModel.getEdgeData();\n    var oldData = this._edgeData;\n    var group = this.group;\n    edgeData.diff(oldData).add(function (newIdx) {\n      var el = new ChordEdge(nodeData, edgeData, newIdx, startAngle);\n      getECData(el).dataIndex = newIdx;\n      group.add(el);\n    }).update(function (newIdx, oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el.updateData(nodeData, edgeData, newIdx, startAngle);\n      group.add(el);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && graphic.removeElementWithFadeOut(el, seriesModel, oldIdx);\n    }).execute();\n    this._edgeData = edgeData;\n  };\n  ChordView.prototype.dispose = function () {};\n  ChordView.type = 'chord';\n  return ChordView;\n}(ChartView);\nexport default ChordView;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}