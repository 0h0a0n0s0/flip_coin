{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, resolveDirective as _resolveDirective, openBlock as _openBlock, createBlock as _createBlock, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"permissions-container\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"permissions-tree\"\n};\nconst _hoisted_3 = {\n  class: \"category-title\"\n};\nconst _hoisted_4 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_divider = _resolveComponent(\"el-divider\");\n  const _component_el_checkbox = _resolveComponent(\"el-checkbox\");\n  const _component_el_checkbox_group = _resolveComponent(\"el-checkbox-group\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  const _directive_loading = _resolveDirective(\"loading\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[11] || (_cache[11] = _createElementVNode(\"h2\", null, \"权限组设定\", -1)), _cache[12] || (_cache[12] = _createElementVNode(\"p\", {\n    class: \"page-description\"\n  }, \"管理後台帐号的角色 (权限组) 及其权限。\", -1)), _createVNode(_component_el_card, {\n    shadow: \"never\",\n    class: \"action-card\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $options.handleAddRole\n    }, {\n      default: _withCtx(() => [...(_cache[5] || (_cache[5] = [_createTextVNode(\"新增权限组\", -1)]))]),\n      _: 1\n    }, 8, [\"onClick\"])]),\n    _: 1\n  }), _withDirectives((_openBlock(), _createBlock(_component_el_card, {\n    shadow: \"never\",\n    class: \"table-card\"\n  }, {\n    header: _withCtx(() => [...(_cache[6] || (_cache[6] = [_createElementVNode(\"div\", null, \"权限组列表\", -1)]))]),\n    default: _withCtx(() => [_createVNode(_component_el_table, {\n      data: $data.rolesList,\n      style: {\n        \"width\": \"100%\"\n      },\n      \"row-key\": \"id\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_table_column, {\n        prop: \"id\",\n        label: \"ID\",\n        width: \"80\",\n        sortable: \"\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"name\",\n        label: \"角色名称\",\n        width: \"200\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"description\",\n        label: \"描述\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"created_at\",\n        label: \"建立时间\",\n        width: \"180\"\n      }, {\n        default: _withCtx(scope => [_createTextVNode(_toDisplayString($options.formatDateTime(scope.row.created_at)), 1)]),\n        _: 1\n      }), _createVNode(_component_el_table_column, {\n        label: \"操作\",\n        width: \"150\",\n        fixed: \"right\"\n      }, {\n        default: _withCtx(scope => [_createVNode(_component_el_button, {\n          type: \"primary\",\n          link: \"\",\n          onClick: $event => $options.handleEditRole(scope.row),\n          disabled: scope.row.id === 1\n        }, {\n          default: _withCtx(() => [...(_cache[7] || (_cache[7] = [_createTextVNode(\" 编辑 \", -1)]))]),\n          _: 1\n        }, 8, [\"onClick\", \"disabled\"]), _createVNode(_component_el_button, {\n          type: \"danger\",\n          link: \"\",\n          onClick: $event => $options.handleDeleteRole(scope.row),\n          disabled: [1, 2, 3].includes(scope.row.id)\n        }, {\n          default: _withCtx(() => [...(_cache[8] || (_cache[8] = [_createTextVNode(\" 删除 \", -1)]))]),\n          _: 1\n        }, 8, [\"onClick\", \"disabled\"])]),\n        _: 1\n      })]),\n      _: 1\n    }, 8, [\"data\"])]),\n    _: 1\n  })), [[_directive_loading, $data.loading]]), _createVNode(_component_el_dialog, {\n    modelValue: $data.dialogVisible,\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.dialogVisible = $event),\n    title: $data.dialogTitle,\n    width: \"700px\",\n    \"close-on-click-modal\": false\n  }, {\n    footer: _withCtx(() => [_createVNode(_component_el_button, {\n      onClick: _cache[3] || (_cache[3] = $event => $data.dialogVisible = false)\n    }, {\n      default: _withCtx(() => [...(_cache[9] || (_cache[9] = [_createTextVNode(\"取消\", -1)]))]),\n      _: 1\n    }), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $options.handleSubmit,\n      loading: $data.submitLoading\n    }, {\n      default: _withCtx(() => [...(_cache[10] || (_cache[10] = [_createTextVNode(\"确认储存\", -1)]))]),\n      _: 1\n    }, 8, [\"onClick\", \"loading\"])]),\n    default: _withCtx(() => [_withDirectives((_openBlock(), _createBlock(_component_el_form, {\n      ref: \"roleFormRef\",\n      model: $data.roleForm,\n      rules: $data.formRules,\n      \"label-width\": \"100px\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"角色名称\",\n        prop: \"name\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $data.roleForm.name,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.roleForm.name = $event),\n          placeholder: \"例如: 营運人员\"\n        }, null, 8, [\"modelValue\"])]),\n        _: 1\n      }), _createVNode(_component_el_form_item, {\n        label: \"角色描述\",\n        prop: \"description\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $data.roleForm.description,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.roleForm.description = $event),\n          type: \"textarea\",\n          placeholder: \"例如: 僅可读取用户和注单列表\"\n        }, null, 8, [\"modelValue\"])]),\n        _: 1\n      }), _createVNode(_component_el_divider), _createVNode(_component_el_form_item, {\n        label: \"权限设置\",\n        prop: \"permission_ids\"\n      }, {\n        default: _withCtx(() => [$data.allPermissions ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Object.keys($data.allPermissions), category => {\n          return _openBlock(), _createElementBlock(\"div\", {\n            key: category,\n            class: \"permission-category\"\n          }, [_createElementVNode(\"h4\", _hoisted_3, _toDisplayString($options.translateCategory(category)), 1), _createVNode(_component_el_checkbox_group, {\n            modelValue: $data.roleForm.permission_ids,\n            \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.roleForm.permission_ids = $event),\n            class: \"permission-group\"\n          }, {\n            default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.allPermissions[category], perm => {\n              return _openBlock(), _createBlock(_component_el_checkbox, {\n                key: perm.id,\n                label: perm.id,\n                value: perm.id,\n                border: \"\",\n                class: \"permission-checkbox\"\n              }, {\n                default: _withCtx(() => [_createTextVNode(_toDisplayString(perm.description) + \" (\" + _toDisplayString(perm.resource) + \":\" + _toDisplayString(perm.action) + \") \", 1)]),\n                _: 2\n              }, 1032, [\"label\", \"value\"]);\n            }), 128))]),\n            _: 2\n          }, 1032, [\"modelValue\"])]);\n        }), 128))])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_4, \"权限加载中...\"))]),\n        _: 1\n      })]),\n      _: 1\n    }, 8, [\"model\", \"rules\"])), [[_directive_loading, $data.dialogLoading]])]),\n    _: 1\n  }, 8, [\"modelValue\", \"title\"])]);\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}