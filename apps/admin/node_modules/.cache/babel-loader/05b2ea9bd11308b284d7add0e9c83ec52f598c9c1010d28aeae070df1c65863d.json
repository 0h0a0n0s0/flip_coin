{"ast":null,"code":"// 档案: admin-ui/src/api/index.js (★★★ v7.3 RBAC 扩充版 ★★★)\n\nimport request from '@/utils/request';\n\n// --- Auth ---\nexport function login(data) {\n  return request({\n    url: '/api/admin/login',\n    method: 'post',\n    data: data\n  });\n}\n// (★★★ Y-A: 新增：获取当前用户权限 ★★★)\nexport function getMyPermissions() {\n  return request({\n    url: '/api/admin/my-permissions',\n    // (我们将在下一步的 server.js 中新增此路由)\n    method: 'get'\n  });\n}\n\n// --- Dashboard ---\nexport function getDashboardStats() {\n  return request({\n    url: '/api/admin/stats',\n    method: 'get'\n  });\n}\n\n// (★★★ 新增：获取钱包监控数据 ★★★)\nexport function getWalletMonitoring() {\n  return request({\n    url: '/api/admin/wallet-monitoring',\n    method: 'get'\n  });\n}\n\n// --- User Management ---\nexport function getUsers(params) {\n  return request({\n    url: '/api/admin/users',\n    method: 'get',\n    params: params\n  });\n}\nexport function updateUserStatus(userId, status) {\n  return request({\n    url: `/api/admin/users/${userId}/status`,\n    method: 'patch',\n    data: {\n      status\n    }\n  });\n}\nexport function updateUser(userId, data) {\n  return request({\n    url: `/api/admin/users/${userId}`,\n    method: 'put',\n    data: data // { nickname, level, referrer_code, balance }\n  });\n}\nexport function getReferrals(inviteCode) {\n  return request({\n    url: `/api/admin/users/by-referrer/${inviteCode}`,\n    method: 'get'\n  });\n}\nexport function getUserDepositAddresses(params) {\n  return request({\n    url: '/api/admin/users/deposit-addresses',\n    method: 'get',\n    params: params\n  });\n}\n\n// --- Bet Management ---\nexport function getBets(params) {\n  return request({\n    url: '/api/admin/bets',\n    method: 'get',\n    params: params\n  });\n}\n\n// --- Report Management ---\nexport function getProfitLossReport(params) {\n  return request({\n    url: '/api/admin/reports/profit-loss',\n    method: 'get',\n    params: params\n  });\n}\n\n// --- Wallet Monitoring ---\nexport function getWallets(params) {\n  return request({\n    url: '/api/admin/wallets',\n    method: 'get',\n    params\n  });\n}\nexport function addWallet(data) {\n  return request({\n    url: '/api/admin/wallets',\n    method: 'post',\n    data\n  });\n}\nexport function updateWallet(id, data) {\n  return request({\n    url: `/api/admin/wallets/${id}`,\n    method: 'put',\n    data\n  });\n}\nexport function deleteWallet(id) {\n  return request({\n    url: `/api/admin/wallets/${id}`,\n    method: 'delete'\n  });\n}\n\n// --- System Settings ---\nexport function getSettings() {\n  return request({\n    url: '/api/admin/settings',\n    method: 'get'\n  });\n}\nexport function updateSetting(key, value) {\n  return request({\n    url: `/api/admin/settings/${key}`,\n    method: 'put',\n    data: {\n      value\n    }\n  });\n}\nexport function getBlockedRegions() {\n  return request({\n    url: '/api/admin/blocked-regions',\n    method: 'get'\n  });\n}\nexport function addBlockedRegion(data) {\n  return request({\n    url: '/api/admin/blocked-regions',\n    method: 'post',\n    data\n  });\n}\nexport function deleteBlockedRegion(id) {\n  return request({\n    url: `/api/admin/blocked-regions/${id}`,\n    method: 'delete'\n  });\n}\nexport function getUserLevels() {\n  return request({\n    url: '/api/admin/user-levels',\n    method: 'get'\n  });\n}\nexport function addUserLevel(data) {\n  return request({\n    url: '/api/admin/user-levels',\n    method: 'post',\n    data\n  });\n}\nexport function updateUserLevel(level, data) {\n  return request({\n    url: `/api/admin/user-levels/${level}`,\n    method: 'put',\n    data\n  });\n}\nexport function deleteUserLevel(level) {\n  return request({\n    url: `/api/admin/user-levels/${level}`,\n    method: 'delete'\n  });\n}\n\n// --- 後台帐号管理 API ---\nexport function getAdminAccounts() {\n  return request({\n    url: '/api/admin/accounts',\n    method: 'get'\n  });\n}\nexport function addAdminAccount(data) {\n  return request({\n    url: '/api/admin/accounts',\n    method: 'post',\n    data\n  });\n}\nexport function updateAdminAccount(id, data) {\n  return request({\n    url: `/api/admin/accounts/${id}`,\n    method: 'put',\n    data // (★★★ Y-B: 注意：前端将传送 role_id ★★★)\n  });\n}\nexport function deleteAdminAccount(id) {\n  return request({\n    url: `/api/admin/accounts/${id}`,\n    method: 'delete'\n  });\n}\nexport function getIpWhitelist() {\n  return request({\n    url: '/api/admin/ip-whitelist',\n    method: 'get'\n  });\n}\nexport function addIpToWhitelist(data) {\n  return request({\n    url: '/api/admin/ip-whitelist',\n    method: 'post',\n    data\n  });\n}\nexport function deleteIpFromWhitelist(id) {\n  return request({\n    url: `/api/admin/ip-whitelist/${id}`,\n    method: 'delete'\n  });\n}\nexport function getAuditLogs(params) {\n  return request({\n    url: '/api/admin/audit-logs',\n    method: 'get',\n    params\n  });\n}\nexport function getSameIpSummary() {\n  return request({\n    url: '/api/admin/risk/same-ip',\n    method: 'get'\n  });\n}\nexport function getUsersByIp(ip) {\n  return request({\n    url: `/api/admin/risk/same-ip/${encodeURIComponent(ip)}/users`,\n    method: 'get'\n  });\n}\nexport function banUsersByIp(ip) {\n  return request({\n    url: `/api/admin/risk/same-ip/${encodeURIComponent(ip)}/ban`,\n    method: 'post'\n  });\n}\nexport function unbanUsersByIp(ip) {\n  return request({\n    url: `/api/admin/risk/same-ip/${encodeURIComponent(ip)}/unban`,\n    method: 'post'\n  });\n}\n\n// (★★★ Y-C: 新增 RBAC 相关 API ★★★)\n/**\n * @description 获取所有权限组 (Roles)\n */\nexport function getRoles() {\n  return request({\n    url: '/api/admin/roles',\n    method: 'get'\n  });\n}\n\n/**\n * @description 获取单一权限组的详細资料 (包含 permission_ids)\n */\nexport function getRoleDetails(id) {\n  return request({\n    url: `/api/admin/roles/${id}`,\n    method: 'get'\n  });\n}\n\n/**\n * @description 获取所有可用的权限 (Permissions) (已按 category 分组)\n */\nexport function getAllPermissions() {\n  return request({\n    url: '/api/admin/permissions',\n    method: 'get'\n  });\n}\n\n/**\n * @description 新增权限组\n */\nexport function addRole(data) {\n  // data: { name, description, permission_ids: [...] }\n  return request({\n    url: '/api/admin/roles',\n    method: 'post',\n    data\n  });\n}\n\n/**\n * @description 更新权限组\n */\nexport function updateRole(id, data) {\n  // data: { name, description, permission_ids: [...] }\n  return request({\n    url: `/api/admin/roles/${id}`,\n    method: 'put',\n    data\n  });\n}\n\n/**\n * @description 刪除权限组\n */\nexport function deleteRole(id) {\n  return request({\n    url: `/api/admin/roles/${id}`,\n    method: 'delete'\n  });\n}\n\n/**\n * @description (获取充值记录)\n */\nexport function getDeposits(params) {\n  return request({\n    url: '/api/admin/deposits',\n    method: 'get',\n    params: params\n  });\n}\nexport function getWithdrawals(params) {\n  return request({\n    url: '/api/admin/withdrawals',\n    method: 'get',\n    params: params\n  });\n}\nexport function approveWithdrawal(id) {\n  return request({\n    url: `/api/admin/withdrawals/${id}/approve`,\n    method: 'post'\n  });\n}\nexport function rejectWithdrawal(id, reason) {\n  // reason: { reason: '...' }\n  return request({\n    url: `/api/admin/withdrawals/${id}/reject`,\n    method: 'post',\n    data: reason\n  });\n}\n/**\n * @description (手动完成提款)\n * @param {number} id - 提款单 ID\n * @param {object} data - { tx_hash, gas_fee }\n */\nexport function completeWithdrawal(id, data) {\n  return request({\n    url: `/api/admin/withdrawals/${id}/complete`,\n    method: 'post',\n    data: data\n  });\n}\n\n// --- Collection Management ---\nexport function getCollectionSettings() {\n  return request({\n    url: '/api/admin/collection/settings',\n    method: 'get'\n  });\n}\nexport function updateCollectionSettings(data) {\n  return request({\n    url: '/api/admin/collection/settings',\n    method: 'post',\n    data: data\n  });\n}\nexport function getCollectionLogs(params) {\n  return request({\n    url: '/api/admin/collection/logs',\n    method: 'get',\n    params: params\n  });\n}\n\n// --- Login Query (v9.2 新增) ---\nexport function getLoginQuery(params) {\n  return request({\n    url: '/api/admin/login-query',\n    method: 'get',\n    params: params\n  });\n}\nexport function getLoginQueryDetail(endpoint) {\n  return request({\n    url: `/api/admin${endpoint}`,\n    method: 'get'\n  });\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}